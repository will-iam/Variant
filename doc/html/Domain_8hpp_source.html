<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Variant: subdomain/Domain.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>subdomain/Domain.hpp</h1><a href="Domain_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef DOMAIN_HPP</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define DOMAIN_HPP</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;map&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="preprocessor">#include &quot;<a class="code" href="SDDistributed_8hpp.html" title="Defines the class of subdomain on distributed memory (SDD).">SDDistributed.hpp</a>&quot;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &quot;number/number.hpp&quot;</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="comment">// Boundary sides</span>
<a name="l00018"></a>00018 <span class="preprocessor">#define INSIDE 0</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span><span class="preprocessor">#define LEFT -1</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#define RIGHT -2</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#define TOP -3</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor">#define BOTTOM -4</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span>
<a name="l00035"></a><a class="code" href="classDomain.html">00035</a> <span class="keyword">class </span><a class="code" href="classDomain.html" title="Domain on which a scheme is executed.">Domain</a> {
<a name="l00036"></a>00036   <span class="keyword">public</span>:
<a name="l00037"></a>00037 
<a name="l00041"></a>00041     <a class="code" href="classDomain.html#a6adccae537e53d4fde2b70f875e6b8d0" title="Constructor.">Domain</a>();
<a name="l00045"></a>00045     <a class="code" href="classDomain.html#a29cec9afb2e54c810ba1f3c1a49543a8" title="Destructor.">~Domain</a>();
<a name="l00046"></a>00046 
<a name="l00055"></a>00055     <span class="keywordtype">void</span> <a class="code" href="classDomain.html#a853266061b629ff1f920b46c06c478d6" title="Initializes domain rectangle.">initRect</a>(real lx, real ly,
<a name="l00056"></a>00056                   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Nx, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Ny);
<a name="l00057"></a>00057 
<a name="l00068"></a>00068     <span class="keywordtype">void</span> <a class="code" href="classDomain.html#a10a5e8384b21bb3c968699c2a6c89bf7" title="Changes options for building SDDs and SDSs.">setOptions</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nSDD, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nSDD_X, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nSDD_Y,
<a name="l00069"></a>00069             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nSDS, std::string SDSgeom,
<a name="l00070"></a>00070             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nThreads);
<a name="l00071"></a>00071 
<a name="l00077"></a>00077     std::vector&lt;SDDistributed*&gt; <a class="code" href="classDomain.html#abdf41aefa7cf64674bce2d4a065fa372" title="Returns vector of pointers to SDDs of the domain.">getSDD</a>() <span class="keyword">const</span>;
<a name="l00078"></a>00078 
<a name="l00084"></a>00084     real <a class="code" href="classDomain.html#a04980b3ddcccb30a79f8fa3c9441d904" title="Returns the non-modifiable width of the domain.">getlx</a>() <span class="keyword">const</span>;
<a name="l00090"></a>00090     real <a class="code" href="classDomain.html#a742a544929b9b82e0d654de8a85ab49b" title="Returns the non-modifiable height of the domain.">getly</a>() <span class="keyword">const</span>;
<a name="l00096"></a>00096     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classDomain.html#a3185aba80f5397341e5a81d84e2bc8f9" title="Returns the non-modifiable number of cells on the x-axis.">getSizeX</a>() <span class="keyword">const</span>;
<a name="l00102"></a>00102     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classDomain.html#a0e7519f6560ddaea2c7c84785441da9a" title="Returns the non-modifiable number of cells on the y-axis.">getSizeY</a>() <span class="keyword">const</span>;
<a name="l00108"></a>00108     real <a class="code" href="classDomain.html#acdf83ef9d3dad3bbc1ae3101f4b2e323" title="Returns the non-modifiable space step on the x-axis (ie. the width of a cell).">getdx</a>() <span class="keyword">const</span>;
<a name="l00114"></a>00114     real <a class="code" href="classDomain.html#a5d72188d7c1873c08da8ef387dee33c6" title="Returns the non-modifiable space step on the y-axis (ie. the height of a cell).">getdy</a>() <span class="keyword">const</span>;
<a name="l00115"></a>00115 
<a name="l00119"></a>00119     std::vector&lt;unsigned int&gt; <a class="code" href="classDomain.html#a6f8a520ffdec82aedbc075c64792517d" title="Returns vector containing unique ids of all cells.">getUidList</a>() <span class="keyword">const</span>;
<a name="l00126"></a>00126     std::vector&lt;unsigned int&gt; <a class="code" href="classDomain.html#a4d0296a4bb86c28b9896951cd1ada6e9" title="Returns vector containing unique ids of all cells outside of the computed domain...">getBoundaryUidList</a>() <span class="keyword">const</span>;
<a name="l00127"></a>00127 
<a name="l00134"></a>00134     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classDomain.html#aa0d225e23c6a454058a3df5b7b5973fa" title="Returns boundary thickness of the domain, ie. the number of layers of cells outside...">getBoundaryThickness</a>();
<a name="l00135"></a>00135 
<a name="l00149"></a>00149     real <a class="code" href="classDomain.html#a6023c81f9233bcc48ad6f315829e9725" title="Returns non-modifiable quantity value of a cell given by its id.">getValue</a>(std::string quantityName, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uid, <span class="keywordtype">int</span> onNext = 0) <span class="keyword">const</span>;
<a name="l00162"></a>00162     <span class="keywordtype">void</span> <a class="code" href="classDomain.html#a9319e738fbd4ada8145998d5392c9334" title="Modifies quantity value of a cell given by its id.">setValue</a>(std::string quantityName, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uid,
<a name="l00163"></a>00163             real value, <span class="keywordtype">int</span> onNext = 0);
<a name="l00164"></a>00164     
<a name="l00173"></a>00173     std::pair&lt;int, int&gt; <a class="code" href="classDomain.html#ab304fc5121bd34e817526fd2d4ccaa62" title="Gets bottom-left coordinates of SDD given by its id.">getBLOfSDD</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> SDDid) <span class="keyword">const</span>;
<a name="l00174"></a>00174 
<a name="l00182"></a>00182     std::pair&lt;int, int&gt; <a class="code" href="classDomain.html#a792c1fd5763b5a5d9c32d085500671fb" title="Gets coordinates on computed domain of cell given by its unique id.">getCoordsOnDomain</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uid) <span class="keyword">const</span>;
<a name="l00183"></a>00183 
<a name="l00192"></a>00192     <a class="code" href="classSDDistributed.html" title="Subdomain on distributed memory (SDD).">SDDistributed</a>* <a class="code" href="classDomain.html#a893851a7caff52261beb79888d46be1f" title="Gets pointer to SDD in charge of the computation of a cell given by its coordinates...">getSDDforCoords</a>(std::pair&lt;int, int&gt; coordsOnDomain);
<a name="l00193"></a>00193 
<a name="l00201"></a>00201     std::pair&lt;char, real&gt; <a class="code" href="classDomain.html#af320a2bc1abbef2f8f7d7f768799194f" title="Returns boundary condition on a cell given by its uid.">getBoundaryCondition</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uid) <span class="keyword">const</span>;
<a name="l00210"></a>00210     std::pair&lt;char, real&gt; <a class="code" href="classDomain.html#af320a2bc1abbef2f8f7d7f768799194f" title="Returns boundary condition on a cell given by its uid.">getBoundaryCondition</a>(std::pair&lt;int, int&gt; coords) <span class="keyword">const</span>;
<a name="l00211"></a>00211 
<a name="l00216"></a>00216     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classDomain.html#aa94b72b9c8ab8ca8dfe15ad3744cdf13" title="Returns non-modifiable unique id of cell given by its coordinates on the domain.">getUid</a>(std::pair&lt;int, int&gt; coordsOnDomain) <span class="keyword">const</span>;
<a name="l00217"></a>00217 
<a name="l00222"></a>00222     <span class="keywordtype">int</span> <a class="code" href="classDomain.html#add94ccfc20fc9421c5c631823da16fc8" title="Returns boundary side (left, right, top, bottom or inside if not on boundary) of...">getBoundarySide</a>(std::pair&lt;int, int&gt; coords) <span class="keyword">const</span>;
<a name="l00223"></a>00223 
<a name="l00231"></a>00231     <span class="keywordtype">void</span> <a class="code" href="classDomain.html#a1463e043dbcda6e6755dda83c26d6b73" title="Adds new unique id &amp;lt;-&amp;gt; coords on domain correspondence on a given cell.">addCoord</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uid, std::pair&lt;int, int&gt; coords);
<a name="l00232"></a>00232 
<a name="l00243"></a>00243     <span class="keywordtype">void</span> <a class="code" href="classDomain.html#a139f4270151467a3380922e98c644f79" title="Adds new unique id &amp;lt;-&amp;gt; coords on domain correspondencPieÅ›nie and boundary...">addBoundaryCoords</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uid,
<a name="l00244"></a>00244             std::pair&lt;int, int&gt; coords, <span class="keywordtype">char</span> BCtype, real value);
<a name="l00245"></a>00245 
<a name="l00251"></a>00251     <span class="keywordtype">void</span> <a class="code" href="classDomain.html#a9c33ac08523c95967ad2a51c59fd8d96" title="Adds new quantity to be managed by the scheme.">addQuantity</a>(std::string quantityName);
<a name="l00258"></a>00258     <span class="keywordtype">void</span> <a class="code" href="classDomain.html#ab24a61d835dbebec7ff689ec8c7f2a95" title="Adds function that resolves a new equation on a SDS to be computed for each iteration...">addEquation</a>(eqType eqFunc);
<a name="l00259"></a>00259 
<a name="l00266"></a>00266     <span class="keywordtype">void</span> <a class="code" href="classDomain.html#a29537b651bacd922cae449357969d900" title="Builds subdomains according to set options.">buildSubDomains</a>();
<a name="l00271"></a>00271     <span class="keywordtype">void</span> <a class="code" href="classDomain.html#a4d1ecd27481f6c7c0b077225fa48bc99" title="Builds all info needed by the domain to compute the boundary according to the boundary...">buildBoundaryMap</a>();
<a name="l00278"></a>00278     <span class="keywordtype">void</span> <a class="code" href="classDomain.html#aa2e6cebf44a57323f3c6344d131126c1" title="Builds the task pool for each SDD.">buildThreads</a>();
<a name="l00279"></a>00279 
<a name="l00284"></a>00284     <span class="keywordtype">void</span> <a class="code" href="classDomain.html#ae587a47610505c21fdd32a9f82d70402" title="Calls all added equations, ie. computes an iteration of the scheme on the domain...">execEquation</a>();
<a name="l00285"></a>00285 
<a name="l00292"></a>00292     <span class="keywordtype">void</span> <a class="code" href="classDomain.html#abcd8aa2529907b8022e41e45c85f5144" title="updates overlap cells of all SDDs according to their values on reference cells on...">updateOverlapCells</a>(std::string quantityName);
<a name="l00306"></a>00306     <span class="keywordtype">void</span> <a class="code" href="classDomain.html#af169473470489edc4235399887c10da0" title="updates boundary of all SDDs according to their values on reference cells on other...">updateBoundaryCells</a>(std::string quantityName, <span class="keywordtype">bool</span> changeNeumannToOpposite = <span class="keyword">false</span>);
<a name="l00307"></a>00307 
<a name="l00318"></a>00318     std::pair&lt;int, std::pair&lt;int, int&gt; &gt; 
<a name="l00319"></a>00319         <a class="code" href="classDomain.html#accb471dd6649bd38403cd28a2bbccd79" title="Returns non-modifiable id of SDD and coordinates on SDD of cell given by its coordinates...">getSDDandCoords</a>(std::pair&lt;int, int&gt; coordsOnDomain) <span class="keyword">const</span>;
<a name="l00330"></a>00330     std::pair&lt;int, std::pair&lt;int, int&gt; &gt; 
<a name="l00331"></a>00331         <a class="code" href="classDomain.html#accb471dd6649bd38403cd28a2bbccd79" title="Returns non-modifiable id of SDD and coordinates on SDD of cell given by its coordinates...">getSDDandCoords</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> SDDid,
<a name="l00332"></a>00332                 std::pair&lt;int, int&gt; coords) <span class="keyword">const</span>;
<a name="l00333"></a>00333 
<a name="l00339"></a>00339     <span class="keywordtype">void</span> <a class="code" href="classDomain.html#a1163559d75540c4cd29c7aa775feca80" title="Prints quantity values for all cells.">printState</a>(std::string quantityName);
<a name="l00340"></a>00340 
<a name="l00341"></a>00341   <span class="keyword">private</span>:
<a name="l00342"></a>00342 
<a name="l00343"></a>00343     std::map&lt; unsigned int, std::pair&lt;int, int&gt; &gt; _uidToCoords;
<a name="l00344"></a>00344     std::map&lt; std::pair&lt;int, int&gt;, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &gt; _coordsToUid;
<a name="l00345"></a>00345 
<a name="l00346"></a>00346     <span class="comment">// Uid &lt;-&gt; boundary conditions &lt;type, value&gt;</span>
<a name="l00347"></a>00347     std::map&lt; std::pair&lt;int, int&gt;, std::pair&lt;char, real&gt; &gt; _coordsToBC;
<a name="l00348"></a>00348 
<a name="l00349"></a>00349     std::vector&lt; std::pair&lt; std::pair&lt;int, int&gt;, <a class="code" href="classSDDistributed.html" title="Subdomain on distributed memory (SDD).">SDDistributed</a>*&gt; &gt; _BLandSDDList;
<a name="l00350"></a>00350 
<a name="l00351"></a>00351     real _lx;
<a name="l00352"></a>00352     real _ly;
<a name="l00353"></a>00353     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _Nx;
<a name="l00354"></a>00354     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _Ny;
<a name="l00355"></a>00355     real _dx;
<a name="l00356"></a>00356     real _dy;
<a name="l00357"></a>00357 
<a name="l00358"></a>00358     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _nSDD;
<a name="l00359"></a>00359     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _nSDD_X; 
<a name="l00360"></a>00360     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _nSDD_Y; 
<a name="l00361"></a>00361     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _nSDS;
<a name="l00362"></a>00362     std::string _SDSgeom;
<a name="l00363"></a>00363     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _nThreads;
<a name="l00364"></a>00364 
<a name="l00365"></a>00365     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> _boundaryThickness;
<a name="l00366"></a>00366 
<a name="l00367"></a>00367 };
<a name="l00368"></a>00368 
<a name="l00375"></a>00375 <span class="keywordtype">int</span> isPowerOf(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> N, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> r);
<a name="l00376"></a>00376 
<a name="l00377"></a>00377 <span class="preprocessor">#endif</span>
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 19 Jun 2017 for Variant by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
